<?xml version="1.0" encoding="UTF-8"?>
<Configuration staus="INFO" monitorInterval="60">
	<Properties>
		<Property name="Log4jContextSelector">org.apache.logging.log4j.core.async.AsyncLoggerContextSelector</Property>
		<Property name="log.location">/logs</Property>
		<Property name="app.name">krug-account</Property>
		<Property name="datahook.name">playerActionLog</Property>
	</Properties>

    <Appenders>
        <Console name="ConsoleAppender" target="SYSTEM_OUT">
            <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} %t %-5p %c{1} - %m%n" />
        </Console>
        <RollingFile
                name="RollingInfoFileAppender"
                fileName="${log.location}/${app.name}-info.log"
                filePattern="${log.location}/${app.name}-info-log.%d{yyyy-MM-dd-HH}.gz">
            <Filters>
                <ThresholdFilter level="INFO" />
            </Filters>
            <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} %t %-5p %c{1}:%L - %m%n" />
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true"/>
            </Policies>

            <DefaultRolloverStrategy>
                <Delete basePath="${log.location}" maxDepth="2">
                    <IfFileName glob="*/*-info-log.*.gz" />
                    <IfLastModified age="31d" />
                </Delete>
            </DefaultRolloverStrategy>
        </RollingFile>
        <RollingFile
                name="RollingErrorFileAppender"
                fileName="${log.location}/${app.name}-error.log"
                filePattern="${log.location}/${app.name}-error-log.%d{yyyy-MM-dd-HH}.gz">
            <Filters>
                <ThresholdFilter level="ERROR" />
            </Filters>
            <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} %t %-5p %c{1}:%L - %m%n" />
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true"/>
            </Policies>

            <DefaultRolloverStrategy>
                <Delete basePath="${log.location}" maxDepth="2">
                    <IfFileName glob="*/*-error-log.*.gz" />
                    <IfLastModified age="31d" />
                </Delete>
            </DefaultRolloverStrategy>
        </RollingFile>
        <!-- data hook plaintext appender -->
		<RollingFile
				name="PlainTextRollingFileAppender"
				fileName="${log.location}/${datahook.name}.log"
				filePattern="${log.location}/${datahook.name}-2-log.%d{yyyy-MM-dd}_%i.gz">
			<PatternLayout pattern="%m%n" />
			<Policies>
				<TimeBasedTriggeringPolicy interval="1" modulate="true"/>
				<SizeBasedTriggeringPolicy size="500 MB"/>
			</Policies>

			<DefaultRolloverStrategy>
				<Delete basePath="${log.location}" maxDepth="2">
					<IfFileName glob="*/*-log.*.gz" />
					<IfLastModified age="31d" />
				</Delete>
			</DefaultRolloverStrategy>
		</RollingFile>
        
    </Appenders>

    <Loggers>
        <!--<AsyncLogger name="com.genesis.platform.jaxrs" level="ERROR" />-->
        <!--<AsyncLogger name="org.springframework.cloud" level="DEBUG" />-->
        <!--<AsyncLogger name="com.genesis.platform.jaxrs.filter.TrackingIdRequestFilter" level="DEBUG" />-->
        <!--<AsyncLogger name="com.genesis.platform.jaxrs.filter.TrackingIdResponseFilter" level="DEBUG" />-->

        <AsyncLogger name="datahook" level="INFO">
            <AppenderRef ref="PlainTextRollingFileAppender"/>
        </AsyncLogger>
        <Root level="INFO">
            <AppenderRef ref="RollingInfoFileAppender" />
            <AppenderRef ref="RollingErrorFileAppender" />
        </Root>
    </Loggers>
</Configuration>

<!--

   Log4J Configuration Quick Reference:
   ====================================


   Priority order is DEBUG < INFO < WARN < ERROR < FATAL


   PatternLayout conversion characters:

	%c   Category of the logging event
	%C   Fully qualified class name of the caller
	%d   Date of the logging event  (example: %d{HH:mm:ss,SSS} )
	%F   File name where the logging request was issued (caution: extremely slow)
	%l   Location information of the caller (caution: extremely slow)
	%L   Line number from where the logging request was issued (caution: extremely slow)
	%m   Application-supplied message
	%M   Method name from where the logging request was issued (caution: extremely slow)
	%n   Line separator
	%p   Priority of the logging event
	%r   Number of milliseconds since the start of the application
	%t   Name of the thread that generated the logging event
	%x   Nested diagnotic context associated with the thread
	%%   A single percent sign

   Format modifiers examples:

	%20c     Left pad with spaces if category is less than 20 characters long
	%-20c    Right pad with spaces if category is less than 20 characters long
	%.30c    Truncate from the beginning if category is more than 30 chars long
	%20.30c  Left pad 20 chars + truncate from beginning if more than 30 chars
	%-20.30c Right pad 20 chars + truncate from beginning if more than 30 chars

   Examples:  "%r [%t] %-5p %c %x - %m\n"
			  "%-6r [%15.15t] %-5p %30.30c %x - %m\n"

-->